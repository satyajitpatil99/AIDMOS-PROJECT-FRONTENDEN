<nav class="navbar navbar-light bg-light m-2">
  <h1 class="h2 ps-1 page-title"><strong>Businesses</strong></h1>
</nav>
<main class="content">
  <div class="row p-3 bg-white">
    <form [formGroup]="businessdata" (ngSubmit)="save(businessdata.value)">
      <div class="row g-3">
        <input type="text" hidden readonly formControlName="id" [(ngModel)]="businessid">
        <div class="col-md-4">
          <label class="form-label">Reg. Date<span class="text-danger">*</span><span *ngIf="businessdata.controls.regdate.touched && businessdata.controls.regdate.invalid" class="text-danger small">Please Select Date</span></label>
          <div class="input-group">
            <input class="form-control mat-datepicker" readonly matInput [matDatepicker]="picker"
              placeholder="dd/mm/yyyy" formControlName="regdate">
            <div class="input-group-append">
              <mat-datepicker-toggle class="mat-datepicker-icon" matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <label class="form-label">Business Name<span class="text-danger">*</span><span *ngIf="businessdata.controls.businessname.touched && businessdata.controls.businessname.invalid" class="text-danger small">Please Enter Business Name </span></label>
          <input type="text" class="form-control" formControlName="businessname" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Owner Name<span class="text-danger">*</span><span *ngIf="businessdata.controls.ownername.touched && businessdata.controls.ownername.invalid" class="text-danger small">Please Enter Owner Name</span></label>
          <input type="text" class="form-control" formControlName="ownername" />
        </div>
        <div class="col-md-8">
          <label class="form-label">Address<span class="text-danger">*</span><span *ngIf="businessdata.controls.address.touched && businessdata.controls.address.invalid" class="text-danger small">Please Enter Address</span></label>
          <input type="text" class="form-control" formControlName="address" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Village<span class="text-danger">*</span><span *ngIf="businessdata.controls.villageid.touched && businessdata.controls.villageid.invalid" class="text-danger small">Please Select Village</span></label>
          <select class="form-select" formControlName="villageid">
            <option selected value="0">Village</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Mobile No<span class="text-danger">*</span><span *ngIf="businessdata.controls.mobileno.touched && businessdata.controls.mobileno.invalid" class="text-danger small">Please Enter Mobile No</span></label>
          <input type="text" class="form-control" formControlName="mobileno">
        </div>
        <div class="col-md-4">
          <label for="inputAddress2" class="form-label">Alternate Mobile No<span class="text-danger">*</span><span *ngIf="businessdata.controls.altmobileno.touched && businessdata.controls.altmobileno.invalid" class="text-danger small">Please Enter Alternate Mobile No</span></label>
          <input type="text" class="form-control" formControlName="altmobileno">
        </div>
        <div class="col-md-4">
          <label for="inputAddress2" class="form-label">Email<span class="text-danger">*</span><span *ngIf="businessdata.controls.email.touched && businessdata.controls.email.invalid" class="text-danger small">Please Enter Email</span></label>
          <input type="email" class="form-control" formControlName="email">
        </div>
        <div class="col-md-12">
          <button type="submit" class="btn btn-primary" [disabled]="!businessdata.valid">Save</button>
          <a class="btn btn-danger ms-2" routerLink="/admin/businesses">Cancel</a>
          <!-- <label class="switch">
            <input type="checkbox" checked>
            <span class="slider round"></span>
          </label> -->
        </div>
      </div>
    </form>
  </div>
  <div class="row mt-2 p-3 bg-white">
    <div class="col-md-12">
      <table class="table table-bordered table-hover border-dark shadow-lg p-3 mb-5">
        <thead>
          <tr>
            <th style="width:100px;">Action</th>
            <th>Sr.No</th>
            <th>Reg. Date</th>
            <th>Business Name</th>
            <th>Owner Name</th>
            <th>Mobile No</th>
            <th>Status</th>
            <th>Users</th>
          </tr>
        </thead>
        <tbody class="table-white">
          <tr *ngFor="let business of businesses; let i = index;">
            <td>
              <button class="btn btn-sm btn-success" (click)="edit(business.id)"><i class="fa fa-edit"></i></button>
              <button class="btn btn-sm btn-danger ms-2" (click)="delete(business.id)"><i class="fa fa-trash"></i></button>
            </td>
            <td>{{ i + 1}}</td>
            <td>{{business.regdate | date}}</td>
            <td>{{business.businessname}}</td>
            <td>{{business.ownername}}</td>
            <td>{{business.mobileno}}</td>
            <td>{{business.status}}</td>
            <td>
              <a class="btn btn-sm btn-warning" routerLink="/admin/users/{{business.id}}"><i class="fa fa-users"></i> Users</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>
